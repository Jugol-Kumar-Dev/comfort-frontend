import{_ as C,A as P,q as M,a as T,u as A,l as $,r as k,s as q,o as r,c as l,d as e,e as S,z as x,t as _,f as i,p as B,k as D}from"./index-VXieFc6Y.js";const d=c=>(B("data-v-4bd5ddd4"),c=c(),D(),c),z={class:"customer-section"},O={class:"container"},R=d(()=>e("h3",{class:"text-capitalize fw-semibold fs-3"},"Select Your Payment Method",-1)),j={class:"method row flex-wrap mt-5"},V={class:"col-lg-6"},U={class:"row flex-wrap"},Y={class:"col-6"},E=d(()=>e("label",{for:"cash_on_delivery",class:"method-item",role:"button"},[e("i",{class:"bi bi-cash-coin"}),e("p",null,"Cash On Delivery")],-1)),L={class:"col-6"},N=d(()=>e("label",{for:"credit_card",class:"method-item",role:"button"},[e("i",{class:"bi bi-credit-card"}),e("p",null,"Stripe")],-1)),Q={class:"col-lg-6 col-md-6 col-12"},F={class:"method-item align-items-start"},G=d(()=>e("h3",{class:"text-start fw-semibold"},"Order Summary",-1)),H={class:"w-100 mb-4"},J={class:"d-flex align-items-center justify-content-between mb-3"},K={class:"fs-5"},W={class:"d-flex align-items-center justify-content-between mb-3"},X=d(()=>e("p",{class:"fs-5"},"Incluted Delivery Charge ",-1)),Z={key:0},ee={key:1},te={class:"d-flex align-items-center justify-content-between"},se=d(()=>e("p",{class:"fs-3"},"Total Amount",-1)),oe={key:0},ae={key:1,class:"fs-3 text-info"},de={__name:"Payment",setup(c){const o=P(),h=M(),y=T(),v=A(),{loading:f,sendRequest:b}=$(),m=k(null),a=k({addressId:h.query.addressId,orders:o.getCartItems,paymentMethod:null,orderTotal:o.getCartTotalPrice}),I=async()=>{var t,n;const u=await v.getToken();if(!a.value.paymentMethod)$toast.error("Please Select Your Payment Method...");else{const s=await b({url:"/api/save-order",method:"POST",data:a.value,headers:{Authorization:`Bearer ${u}`}});if(o.clearCart(),s!=null&&s.data&&((t=s.data)==null?void 0:t.type)==="stripe_payment")window.open((n=s.data)==null?void 0:n.data);else return y.push({name:"ordercomplate"})}};return q(async()=>{const u=await v.getToken();if(h.query.addressId){const t=await b({method:"get",url:`/api/address/${h.query.addressId}`,headers:{Authorization:`Bearer ${u}`}});m.value=t==null?void 0:t.data}else y.push({name:"checkout",query:{invalidAddressId:!0}})}),(u,t)=>{var n,s,g,w;return r(),l("section",z,[e("div",O,[R,e("div",j,[e("div",V,[e("div",U,[e("div",Y,[S(e("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=p=>a.value.paymentMethod=p),name:"payment",id:"cash_on_delivery",value:"cod",class:"method-radio"},null,512),[[x,a.value.paymentMethod]]),E]),e("div",L,[S(e("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=p=>a.value.paymentMethod=p),name:"payment",id:"credit_card",value:"stripe",class:"method-radio"},null,512),[[x,a.value.paymentMethod]]),N])])]),e("div",Q,[e("div",F,[G,e("ul",H,[e("li",J,[e("p",K,"Subtotal ("+_(i(o).getCartLength)+" Items Total Of Qty And Prices)",1),e("p",null,"$ "+_(i(o).getCartTotalPrice),1)]),e("li",W,[X,i(f)?(r(),l("p",Z,"...")):(r(),l("p",ee,_((s=(n=m.value)==null?void 0:n.order_area)==null?void 0:s.delivery_charge)+" $",1))]),e("li",te,[se,i(f)?(r(),l("p",oe,"...")):(r(),l("p",ae,"$ "+_(i(o).getCartTotalPrice+((w=(g=m.value)==null?void 0:g.order_area)==null?void 0:w.delivery_charge)),1))])]),e("button",{onClick:I,class:"primary-button"},"Confirm Order")])])])])])}}},re=C(de,[["__scopeId","data-v-4bd5ddd4"]]);export{re as default};
