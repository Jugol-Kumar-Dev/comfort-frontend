import{A as Se,l as De,a as Pe,q as Ne,r as u,u as Ve,s as be,o as r,c as d,d as e,F as A,x as I,e as _,E as Te,w as Ue,v as m,f as a,t as l,m as f,D as Be,j as ke}from"./index-VXieFc6Y.js";const Fe={class:"checkout"},ze={class:"container-fluid my-5"},Me={class:"row"},qe={class:"col-lg-7 col-12"},Re={class:"checkout__shipping-add"},je=e("h3",null,"Shipping Address",-1),Ee={class:"d-flex flex-wrap created-address"},Le=["id","onInput","value"],Qe=["for"],Oe={class:"mb-2"},Ye={class:"mb-2"},Ze={class:"col-md-6 col-12 pe-2"},Ge=e("div",{class:"d-flex flex-column align-items-center"},[e("i",{class:"bi bi-plus"}),ke(" Add New Address ")],-1),He=[Ge],Je={key:0,class:"checkout__shipping-add-wrapper"},Ke={class:"checkout__shipping-add-wrapper-new"},We=e("h3",null,"New Address",-1),Xe={class:"form-floating"},et=e("label",{for:"floatingInput"},"Full Name",-1),tt={key:0,class:"text-danger"},st={class:"form-floating"},lt=e("label",{for:"floatingInput"},"Address",-1),ot={key:0,class:"text-danger"},at={class:"form-floating"},nt=e("label",{for:"floatingInput"},"Email",-1),rt={key:0,class:"text-danger"},dt={class:"d-flex align-items-center gap-3 flex-wrap flex-md-nowrap"},it=e("option",{value:"null",selected:"",disabled:""},"Add New City",-1),ct=["value"],ut={class:"form-floating"},_t=e("label",{for:"floatingInput"},"State",-1),pt={class:"form-floating"},vt=e("label",{for:"floatingInput"},"ZIP Code",-1),ht={key:0,class:"text-danger"},mt={class:"form-floating"},ft=e("label",{for:"floatingInput"},"Phone Number",-1),gt={key:0,class:"text-danger"},yt={class:"d-flex align-items-center justify-content-end gap-3"},bt=e("button",{class:"primary-button",type:"submit"},"Save",-1),kt={class:"col-lg-5 col-12"},wt={class:"row flex-column gap-3"},xt={class:"col-12"},At={class:"checkout__product"},It={class:"checkout__product-items"},Ct={class:"d-flex align-items-center"},$t=["src"],St={class:"pe-2"},Dt={class:"d-flex align-items-center justify-content-between w-50 ps-5"},Pt={class:"pt-3 text-end fw-bold"},Nt={class:"text-info"},Vt={class:"col-12"},Tt={class:"checkout__payment"},Ut=e("p",{class:"text-dark fw-semibold fs-3"},"Order Summary",-1),Bt=e("span",null,"Items Total",-1),Ft=e("span",null,"Delivery Fee",-1),zt={class:"border-top border-2"},Mt=e("strong",null,"Total Payment",-1),Et={__name:"Checkout",setup(qt){const g=Se(),{loading:Rt,error:i,sendRequest:w}=De(),we=Pe(),xe=Ne(),p=u({setDeliveryAddress:!1,setDesiveryCharge:0,addressId:null}),C=u(null);u(null);const Ae=n=>{var s;p.value.setDeliveryAddress=!0,p.value.setDesiveryCharge=(s=n.order_area)==null?void 0:s.delivery_charge,p.value.addressId=n.id},Ie=()=>{p.value.setDeliveryAddress?we.push({name:"payment",query:{addressId:p.value.addressId}}):$toast.error("Please Select Your Delivery Address...")},v=u(!1);u(!1);const y=Ve(),o=u({title:null,email:null,phone:null,address:null,area:null,state:null,zip_code:null}),Ce=async()=>{var s;await w({method:"post",data:{user_id:(s=y==null?void 0:y.user)==null?void 0:s.id,...o.value},url:"/api/save-new-address"})!==void 0&&(await S(),v.value=!1,$toast.success("Address Added"))},$e=u(null),$=u(null),S=async()=>{var c;const n=await y.getToken(),s=await w({method:"get",url:"/api/address",headers:{Authorization:`Bearer ${n}`}});$e.value=(c=s==null?void 0:s.data)==null?void 0:c.addresses};return be(async()=>{await S();const n=await w({method:"get",url:"/api/all-areas"});$.value=n==null?void 0:n.data}),be(async()=>{var c;const n=await y.getToken(),s=await w({method:"get",url:"/api/address",headers:{Authorization:`Bearer ${n}`}});C.value=(c=s==null?void 0:s.data)==null?void 0:c.addresses,xe.query.invalidAddressId&&$toast.error("Please Select Your Shipping Details Before Payment.")}),(n,s)=>{var c,D,P,N,V,T,U,B,F,z,M,q,R,j,E,L,Q,O,Y,Z,G,H,J,K,W,X,ee,te,se,le,oe,ae,ne,re,de,ie,ce,ue,_e,pe,ve,he;return r(),d("section",Fe,[e("div",ze,[e("div",Me,[e("div",qe,[e("div",Re,[je,e("div",Ee,[(r(!0),d(A,null,I(C.value,(t,h)=>{var b,k;return r(),d("div",{class:"col-md-6 col-12 pe-2 mb-3",key:`add-${h}`},[e("input",{type:"radio",name:"address",id:`add-${h}`,onInput:x=>Ae(t),value:h,class:"address-radio address-radio--one"},null,40,Le),e("label",{for:`add-${h}`,role:"button",class:"w-100 h-100"},[e("h3",null,l(t==null?void 0:t.title),1),e("div",null,[e("p",Oe,l(t==null?void 0:t.address),1),e("p",null,l(t==null?void 0:t.email),1),e("p",Ye,l(t==null?void 0:t.phone),1),e("p",null,"Area: "+l((b=t==null?void 0:t.order_area)==null?void 0:b.area_name)+" & Delivery Charge: "+l((k=t==null?void 0:t.order_area)==null?void 0:k.delivery_charge)+" $",1)])],8,Qe)])}),128)),e("div",Ze,[_(e("button",{class:"add-new-add m-0",onClick:s[0]||(s[0]=t=>v.value=!0)},He,512),[[Te,!v.value]])])]),v.value?(r(),d("div",Je,[e("div",Ke,[We,e("form",{onSubmit:Ue(Ce,["prevent"])},[e("div",Xe,[_(e("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"Full Name","onUpdate:modelValue":s[1]||(s[1]=t=>o.value.title=t)},null,512),[[m,o.value.title]]),et,(N=(P=(D=(c=a(i))==null?void 0:c.response)==null?void 0:D.data)==null?void 0:P.errors)!=null&&N.title?(r(),d("small",tt,l((B=(U=(T=(V=a(i))==null?void 0:V.response)==null?void 0:T.data)==null?void 0:U.errors)==null?void 0:B.title[0]),1)):f("",!0)]),e("div",st,[_(e("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"Address","onUpdate:modelValue":s[2]||(s[2]=t=>o.value.address=t)},null,512),[[m,o.value.address]]),lt,(q=(M=(z=(F=a(i))==null?void 0:F.response)==null?void 0:z.data)==null?void 0:M.errors)!=null&&q.address?(r(),d("small",ot,l((L=(E=(j=(R=a(i))==null?void 0:R.response)==null?void 0:j.data)==null?void 0:E.errors)==null?void 0:L.address[0]),1)):f("",!0)]),e("div",at,[_(e("input",{type:"email",class:"form-control",id:"floatingInput",placeholder:"email","onUpdate:modelValue":s[3]||(s[3]=t=>o.value.email=t)},null,512),[[m,o.value.email]]),nt,(Z=(Y=(O=(Q=a(i))==null?void 0:Q.response)==null?void 0:O.data)==null?void 0:Y.errors)!=null&&Z.email?(r(),d("small",rt,l((K=(J=(H=(G=a(i))==null?void 0:G.response)==null?void 0:H.data)==null?void 0:J.errors)==null?void 0:K.email[0]),1)):f("",!0)]),e("div",dt,[_(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>o.value.area=t),class:"form-select","aria-label":"Default select example"},[it,(r(!0),d(A,null,I($.value,t=>(r(),d("option",{key:`single-i-${t.id}`,value:t.id},l(t==null?void 0:t.area_name),9,ct))),128))],512),[[Be,o.value.area]]),e("div",ut,[_(e("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"State","onUpdate:modelValue":s[5]||(s[5]=t=>o.value.state=t)},null,512),[[m,o.value.state]]),_t]),e("div",pt,[_(e("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"ZIP Code","onUpdate:modelValue":s[6]||(s[6]=t=>o.value.zip_code=t)},null,512),[[m,o.value.zip_code]]),vt])]),(te=(ee=(X=(W=a(i))==null?void 0:W.response)==null?void 0:X.data)==null?void 0:ee.errors)!=null&&te.area?(r(),d("small",ht,l((ae=(oe=(le=(se=a(i))==null?void 0:se.response)==null?void 0:le.data)==null?void 0:oe.errors)==null?void 0:ae.area[0]),1)):f("",!0),e("div",null,[e("div",mt,[_(e("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"Phone Number","onUpdate:modelValue":s[7]||(s[7]=t=>o.value.phone=t)},null,512),[[m,o.value.phone]]),ft,(ie=(de=(re=(ne=a(i))==null?void 0:ne.response)==null?void 0:re.data)==null?void 0:de.errors)!=null&&ie.phone?(r(),d("small",gt,l((pe=(_e=(ue=(ce=a(i))==null?void 0:ce.response)==null?void 0:ue.data)==null?void 0:_e.errors)==null?void 0:pe.phone[0]),1)):f("",!0)])]),e("div",yt,[bt,e("button",{class:"secondary-button",onClick:s[8]||(s[8]=t=>v.value=!v.value)},"Close")])],32)])])):f("",!0)])]),e("div",kt,[e("div",wt,[e("div",xt,[e("div",At,[e("div",It,[(r(!0),d(A,null,I(a(g).getCartItems,(t,h)=>{var b,k,x,me,fe,ge,ye;return r(),d("div",{class:"checkout__product-items__item",key:`cart-item-${h}`},[e("div",Ct,[e("img",{src:`${n.$API_URL}/storage/uploads/${((b=t==null?void 0:t.selectSku)==null?void 0:b.image)??((x=(k=t==null?void 0:t.data)==null?void 0:k.images[0])==null?void 0:x.image)}`,style:{width:"70px",height:"auto"},alt:"Chair"},null,8,$t),e("div",St,[e("p",null,l((me=t==null?void 0:t.data)==null?void 0:me.title),1)])]),e("div",Dt,[e("div",null,[e("p",null,"Qty: "+l((fe=t.selectSku)==null?void 0:fe.selectQty),1)]),e("div",null,"$ "+l(((ge=t.selectSku)==null?void 0:ge.price)*((ye=t.selectSku)==null?void 0:ye.selectQty)),1)])])}),128))]),e("div",null,[e("p",Pt,[ke(l(a(g).getCartLength)+" Items. Subtotal: ",1),e("span",Nt,"$ "+l(a(g).getCartTotalPrice),1)])])])]),e("div",Vt,[e("div",Tt,[Ut,e("ul",null,[e("li",null,[Bt,e("span",null,l(a(g).getCartTotalPrice)+" $",1)]),e("li",null,[Ft,e("span",null,l((ve=p.value)==null?void 0:ve.setDesiveryCharge)+" $",1)]),e("li",zt,[Mt,e("strong",null,l(a(g).getCartTotalPrice+((he=p.value)==null?void 0:he.setDesiveryCharge))+" $",1)])]),e("button",{onClick:Ie,class:"primary-button text-center"},"Place Order")])])])])])])])}}};export{Et as default};
