import{A as Pe,l as Ne,a as Te,q as Ve,r as u,u as Ue,s as be,o as n,c as d,d as e,F as I,x as A,e as _,E as Be,w as Fe,v as m,f as o,t as l,m as g,D as ze,j as ke}from"./index-XtAJ1EXg.js";const Me={class:"checkout"},je={class:"container-fluid my-5"},qe={class:"row"},Le={class:"col-lg-7 col-12"},Re={class:"checkout__shipping-add"},Ee=e("h3",null,"Shipping Address",-1),Qe={class:"d-flex flex-wrap created-address"},Oe=["id","onInput","value"],Ye=["for"],Ze={class:"mb-2"},Ge={class:"mb-2"},He={class:"col-md-6 col-12 pe-2"},Je=e("div",{class:"d-flex flex-column align-items-center"},[e("i",{class:"bi bi-plus"}),ke(" Add New Address ")],-1),Ke=[Je],We={key:0,class:"checkout__shipping-add-wrapper"},Xe={class:"checkout__shipping-add-wrapper-new"},et=e("h3",null,"New Address",-1),tt={class:"form-floating"},st=e("label",{for:"floatingInput"},"Full Name",-1),lt={key:0,class:"text-danger"},ot={class:"form-floating"},at=e("label",{for:"floatingInput"},"Address",-1),nt={key:0,class:"text-danger"},dt={class:"form-floating"},it=e("label",{for:"floatingInput"},"Email",-1),rt={key:0,class:"text-danger"},ct={class:"d-flex align-items-center gap-3 flex-wrap flex-md-nowrap"},ut=e("option",{value:"null",selected:"",disabled:""},"Add New City",-1),_t=["value"],pt={class:"form-floating"},ht=e("label",{for:"floatingInput"},"State",-1),vt={class:"form-floating"},ft=e("label",{for:"floatingInput"},"ZIP Code",-1),mt={key:0,class:"text-danger"},gt={class:"form-floating"},yt=e("label",{for:"floatingInput"},"Phone Number",-1),bt={key:0,class:"text-danger"},kt={class:"d-flex align-items-center justify-content-end gap-3"},xt=["disabled"],wt=e("div",{class:"spinner-border fs-3",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1),It=[wt],At={key:1,class:"d-flex align-items-center justify-content-end gap-3"},Ct=e("button",{class:"primary-button",type:"submit"},"Save",-1),$t={class:"col-lg-5 col-12"},St={class:"row flex-column gap-3"},Dt={class:"col-12"},Pt={class:"checkout__product"},Nt={class:"checkout__product-items"},Tt={class:"d-flex align-items-center"},Vt=["src"],Ut={class:"pe-2"},Bt={class:"d-flex align-items-center justify-content-between w-50 ps-5"},Ft={class:"pt-3 text-end fw-bold"},zt={class:"text-info"},Mt=e("div",{class:"col-12"},[e("div",{class:"checkout__payment d-flex gap-4 flex-row align-items-center"},[e("i",{class:"bi bi-info-circle-fill text-info fs-2"}),e("span",{class:"fs-3"},'"This product will take 5 to 10 days to be delivered"')])],-1),jt={class:"col-12"},qt={class:"checkout__payment"},Lt=e("p",{class:"text-dark fw-semibold fs-3"},"Order Summary",-1),Rt=e("span",null,"Items Total",-1),Et=e("span",null,"Delivery Fee",-1),Qt={class:"border-top border-2"},Ot=e("strong",null,"Total Payment",-1),Gt={__name:"Checkout",setup(Yt){const y=Pe(),{loading:xe,error:r,sendRequest:x}=Ne(),we=Te(),Ie=Ve(),p=u({setDeliveryAddress:!1,setDesiveryCharge:0,addressId:null}),C=u(null);u(null);const Ae=i=>{var s;p.value.setDeliveryAddress=!0,p.value.setDesiveryCharge=(s=i.order_area)==null?void 0:s.delivery_charge,p.value.addressId=i.id},Ce=()=>{p.value.setDeliveryAddress?we.push({name:"payment",query:{addressId:p.value.addressId}}):$toast.error("Please Select Your Delivery Address...")},h=u(!1);u(!1);const v=Ue(),a=u({title:null,email:null,phone:null,address:null,area:null,state:null,zip_code:null}),$e=async()=>{var s;await x({method:"post",data:{user_id:(s=v==null?void 0:v.user)==null?void 0:s.id,...a.value},url:"/api/save-new-address"})!==void 0&&(h.value=!1,$toast.success("Address Added"),await S())},Se=u(null),$=u(null),De=async()=>{var c;const i=await v.getToken(),s=await x({method:"get",url:"/api/address",headers:{Authorization:`Bearer ${i}`}});Se.value=(c=s==null?void 0:s.data)==null?void 0:c.addresses};be(async()=>{await De();const i=await x({method:"get",url:"/api/all-areas"});$.value=i==null?void 0:i.data});const S=async()=>{var c;const i=await v.getToken(),s=await x({method:"get",url:"/api/address",headers:{Authorization:`Bearer ${i}`}});C.value=(c=s==null?void 0:s.data)==null?void 0:c.addresses};return be(async()=>{await S(),Ie.query.invalidAddressId&&$toast.error("Please Select Your Shipping Details Before Payment.")}),(i,s)=>{var c,D,P,N,T,V,U,B,F,z,M,j,q,L,R,E,Q,O,Y,Z,G,H,J,K,W,X,ee,te,se,le,oe,ae,ne,de,ie,re,ce,ue,_e,pe,he,ve;return n(),d("section",Me,[e("div",je,[e("div",qe,[e("div",Le,[e("div",Re,[Ee,e("div",Qe,[(n(!0),d(I,null,A(C.value,(t,f)=>{var b,k;return n(),d("div",{class:"col-md-6 col-12 pe-2 mb-3",key:`add-${f}`},[e("input",{type:"radio",name:"address",id:`add-${f}`,onInput:w=>Ae(t),value:f,class:"address-radio address-radio--one"},null,40,Oe),e("label",{for:`add-${f}`,role:"button",class:"w-100 h-100"},[e("h3",null,l(t==null?void 0:t.title),1),e("div",null,[e("p",Ze,l(t==null?void 0:t.address),1),e("p",null,l(t==null?void 0:t.email),1),e("p",Ge,l(t==null?void 0:t.phone),1),e("p",null,"Area: "+l((b=t==null?void 0:t.order_area)==null?void 0:b.area_name)+" & Delivery Charge: "+l((k=t==null?void 0:t.order_area)==null?void 0:k.delivery_charge)+" $",1)])],8,Ye)])}),128)),e("div",He,[_(e("button",{class:"add-new-add m-0",onClick:s[0]||(s[0]=t=>h.value=!0)},Ke,512),[[Be,!h.value]])])]),h.value?(n(),d("div",We,[e("div",Xe,[et,e("form",{onSubmit:Fe($e,["prevent"])},[e("div",tt,[_(e("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"Full Name","onUpdate:modelValue":s[1]||(s[1]=t=>a.value.title=t)},null,512),[[m,a.value.title]]),st,(N=(P=(D=(c=o(r))==null?void 0:c.response)==null?void 0:D.data)==null?void 0:P.errors)!=null&&N.title?(n(),d("small",lt,l((B=(U=(V=(T=o(r))==null?void 0:T.response)==null?void 0:V.data)==null?void 0:U.errors)==null?void 0:B.title[0]),1)):g("",!0)]),e("div",ot,[_(e("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"Address","onUpdate:modelValue":s[2]||(s[2]=t=>a.value.address=t)},null,512),[[m,a.value.address]]),at,(j=(M=(z=(F=o(r))==null?void 0:F.response)==null?void 0:z.data)==null?void 0:M.errors)!=null&&j.address?(n(),d("small",nt,l((E=(R=(L=(q=o(r))==null?void 0:q.response)==null?void 0:L.data)==null?void 0:R.errors)==null?void 0:E.address[0]),1)):g("",!0)]),e("div",dt,[_(e("input",{type:"email",class:"form-control",id:"floatingInput",placeholder:"email","onUpdate:modelValue":s[3]||(s[3]=t=>a.value.email=t)},null,512),[[m,a.value.email]]),it,(Z=(Y=(O=(Q=o(r))==null?void 0:Q.response)==null?void 0:O.data)==null?void 0:Y.errors)!=null&&Z.email?(n(),d("small",rt,l((K=(J=(H=(G=o(r))==null?void 0:G.response)==null?void 0:H.data)==null?void 0:J.errors)==null?void 0:K.email[0]),1)):g("",!0)]),e("div",ct,[_(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>a.value.area=t),class:"form-select","aria-label":"Default select example"},[ut,(n(!0),d(I,null,A($.value,t=>(n(),d("option",{key:`single-i-${t.id}`,value:t.id},l(t==null?void 0:t.area_name),9,_t))),128))],512),[[ze,a.value.area]]),e("div",pt,[_(e("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"State","onUpdate:modelValue":s[5]||(s[5]=t=>a.value.state=t)},null,512),[[m,a.value.state]]),ht]),e("div",vt,[_(e("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"ZIP Code","onUpdate:modelValue":s[6]||(s[6]=t=>a.value.zip_code=t)},null,512),[[m,a.value.zip_code]]),ft])]),(te=(ee=(X=(W=o(r))==null?void 0:W.response)==null?void 0:X.data)==null?void 0:ee.errors)!=null&&te.area?(n(),d("small",mt,l((ae=(oe=(le=(se=o(r))==null?void 0:se.response)==null?void 0:le.data)==null?void 0:oe.errors)==null?void 0:ae.area[0]),1)):g("",!0),e("div",null,[e("div",gt,[_(e("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"Phone Number","onUpdate:modelValue":s[7]||(s[7]=t=>a.value.phone=t)},null,512),[[m,a.value.phone]]),yt,(re=(ie=(de=(ne=o(r))==null?void 0:ne.response)==null?void 0:de.data)==null?void 0:ie.errors)!=null&&re.phone?(n(),d("small",bt,l((pe=(_e=(ue=(ce=o(r))==null?void 0:ce.response)==null?void 0:ue.data)==null?void 0:_e.errors)==null?void 0:pe.phone[0]),1)):g("",!0)])]),e("div",kt,[o(xe)?(n(),d("button",{key:0,class:"primary-button",disabled:o(v).loading},It,8,xt)):(n(),d("div",At,[Ct,e("button",{class:"secondary-button",onClick:s[8]||(s[8]=t=>h.value=!h.value)},"Close")]))])],32)])])):g("",!0)])]),e("div",$t,[e("div",St,[e("div",Dt,[e("div",Pt,[e("div",Nt,[(n(!0),d(I,null,A(o(y).getCartItems,(t,f)=>{var b,k,w,fe,me,ge,ye;return n(),d("div",{class:"checkout__product-items__item",key:`cart-item-${f}`},[e("div",Tt,[e("img",{src:`${i.$API_URL}/storage/uploads/${((b=t==null?void 0:t.selectSku)==null?void 0:b.image)??((w=(k=t==null?void 0:t.data)==null?void 0:k.images[0])==null?void 0:w.image)}`,style:{width:"70px",height:"auto"},alt:"Chair"},null,8,Vt),e("div",Ut,[e("p",null,l((fe=t==null?void 0:t.data)==null?void 0:fe.title),1)])]),e("div",Bt,[e("div",null,[e("p",null,"Qty: "+l((me=t.selectSku)==null?void 0:me.selectQty),1)]),e("div",null,"$ "+l(((ge=t.selectSku)==null?void 0:ge.price)*((ye=t.selectSku)==null?void 0:ye.selectQty)),1)])])}),128))]),e("div",null,[e("p",Ft,[ke(l(o(y).getCartLength)+" Items. Subtotal: ",1),e("span",zt,"$ "+l(o(y).getCartTotalPrice),1)])])])]),Mt,e("div",jt,[e("div",qt,[Lt,e("ul",null,[e("li",null,[Rt,e("span",null,l(o(y).getCartTotalPrice)+" $",1)]),e("li",null,[Et,e("span",null,l((he=p.value)==null?void 0:he.setDesiveryCharge)+" $",1)]),e("li",Qt,[Ot,e("strong",null,l(parseInt(o(y).getCartTotalPrice)+parseInt((ve=p.value)==null?void 0:ve.setDesiveryCharge))+" $",1)])]),e("button",{onClick:Ce,class:"primary-button text-center"},"Place Order")])])])])])])])}}};export{Gt as default};
